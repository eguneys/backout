var Tetris=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){n(2);const r=n(3);t.exports=r.app},function(t,e,n){},function(t,e,n){"use strict";function r(){const t={unit:30,width:256,height:256,ratio:1,vx:10,tick:0};return{game:t,hero:{radius:t.unit/2,gap:2,gapMove:2,rotation:0,tick:0}}}n.r(e);const i=Math.PI;function s(t,e,n){return Math.min(Math.max(t,e),n)}function o(t,e){const{width:n,height:r}=t.game,i=n*r;this.buffers={Screen:0,Buffer:2*i,Debug:4*i,Scratch:6*i,Scratch2:8*i,Sprites:10*i,Collision:12*i,Midground:14*i,Foreground:16*i,Background:18*i};const o=this.buffers,a=[4278190080,4281606178,4282132549,4281416038,4282078863,4280709599,4284915929,4288332782,4281791227,4283491737,4281384554,4285436983,4281297227,4280568658,4281941042,4285808447,4286734384,4292963931,4294941539,4293184863,4294761419,4294967295,4290227611,4287069828,4285164137,4283586137,4287251062,4281479852,4284700633,4290411479,4283078543,4281364362];let c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31];this.renderTarget=o.Screen,this.renderSource=o.Page1;const l=e.getImageData(0,0,n,r);let h=new ArrayBuffer(l.data.length),u=new Uint8ClampedArray(h),f=new Uint32Array(h),p=new Uint8ClampedArray(524288);this.clear=t=>{p.fill(t,this.renderTarget,this.renderTarget+i)},this.pset=(t,e,i)=>{t=s(0|t,0,n),e=s(0|e,0,r),p[this.renderTarget+e*n+t]=i};this.line=(t,e,n,r,i)=>{let s,o=r-e,a=n-t,c=1,l=1;if(o<0&&(o=-o,l=-1),a<0&&(a=-a,c=-1),o<<=1,a<<=1,this.pset(t,e,i),a>o)for(s=o-(a>>1);t!=n;)s>=0&&(e+=l,s-=a),t+=c,s+=o,this.pset(t,e,i);else for(s=a-(o>>1);e!=r;)s>=0&&(t+=c,s-=o),e+=l,s+=a,this.pset(t,e,i)},this.circle=(t,e,n,r)=>{let i=-n,s=0,o=2-2*n;do{this.pset(t-i,e+s,r),this.pset(t-s,e-i,r),this.pset(t+i,e-s,r),this.pset(t+s,e+i,r),(n=o)<=s&&(o+=2*++s+1),(n>i||o>s)&&(o+=2*++i+1)}while(i<0)},this.fillCircle=(t,e,n,r)=>{if(n<0)return;t|=0,e|=0,r|=0;let i=-(n|=0),s=0,o=2-2*n;do{this.line(t-i,e-s,t+i,e-s,r),this.line(t-i,e+s,t+i,e+s,r),(n=o)<=s&&(o+=2*++s+1),(n>i||o>s)&&(o+=2*++i+1)}while(i<0)};this.fr=(t,e,n,r,i)=>{let s=0|t,o=0|e,a=t+n|0,c=e+r|0,l=Math.abs(c-o);if(this.line(s,o,a,o,i),l>0)for(;--l;)this.line(s,o+l,a,o+l,i);this.line(s,c,a,c,i)};this.render=()=>{let t=65536;for(;t--;)f[t]=a[c[p[t]]];l.data.set(u),e.putImageData(l,0,0)}}const a=function(){const t={"-":"\n\n\n.....\n\n\n"," ":"\n\n\n\n\n\n","/":"\n    .\n   .\n  .\n .\n.\n",x:"\n.   .\n . .\n  .\n . .\n.   .\n",unknown:"\n.....\n.   .\n.   .\n.   .\n.....\n"};return Object.keys(t).reduce((e,n)=>({[n]:t[n].replace(/^\n|\n$/g,"").split("\n").map(t=>t.split("")),...e}),{})}();function c(t,e){let n=t.text.length;for(let r=0;r<n;r++){let n=a[t.text.charAt(r)]||a.unknown;for(let i=0;i<5;i++)for(let s=0;s<5;s++)"."===n[i][s]&&(1===t.scale?e.pset(t.x+s+(5+t.hspacing)*r,t.y+i,t.color):e.fr(t.x+s*t.scale+(5*t.scale+t.hspacing)*r,t.y+i*t.scale,t.scale,t.scale,t.color))}}function l(t,e){const{width:n,height:r}=t.data.game,s=e.buffers;e.renderTarget=s.Screen,this.render=t=>{const s=.001*t.data.game.tick;e.clear(0);for(let t=0;t<n;t+=40)for(let i=0;i<r;i+=40){let o=t-n/2+40*Math.sin(s),a=i-r/2+40*Math.cos(s),c=Math.sqrt(o*o+a*a);e.circle(t,i,c-8,21)}e.clear(0);for(let t=0;t<2*i;t+=.7)for(let i=20;i<200;i+=9){let o=t+.4*Math.sin(8*t-i/20+s);e.fillCircle(n/2+i*Math.cos(o),r/2+i*Math.sin(o),10-i/12|0,10+i/9%32|0)}!function(t,e){let n=5*(t={scale:1,hspacing:1,vspacing:1,halign:"left",valign:"bottom",render:!0,...t}).scale,r=t.text.split("\n"),i=r.slice(0),s=r.length,o=i.sort((t,e)=>e.length-t.length)[0],a=o.length*n+(o.length-1)*t.hspacing,l=s*n+(s-1)*t.vspacing,h=t.x,u=t.y,f=t.x+a,p=t.y+l,d=h+a/2,g=u+l/2;if(t.render)for(let i=0;i<s;i++){let s=r[i];s.length,s.length,t.hspacing,c({x:t.x,y:t.y+(n+t.vspacing)*i,text:s,hspacing:t.hspacing||0,scale:t.scale||1,color:t.color},e)}}({x:60,y:r-20,text:"xs-lso",color:21,hspacing:2,scale:2},e)}}function h(t,e){this.ctx=e,this.data=t,this.update=t=>{this.data.game.tick+=t}}const u=void 0!==window.performance?window.performance:Date,f=()=>u.now(),p=window.requestAnimationFrame;function d(t){let e=!1,n=f(),r=0;this.start=()=>e?this:(e=!0,n=f(),r=p(i),this),this.stop=()=>(e=!1,0!=r&&p.cancel(r),r=0,this);const i=()=>{r=p(i);const e=f();t(e-n),n=e}}function g(t,e){const n=document.createElement("canvas"),i=n.getContext("2d"),s={...r()};let a=new h(s,i),c=new o(s,i),u=new l(a,c);new d(t=>{a.update(t),u.render(a),c.render()}).start(),n.width=s.game.width,n.height=s.game.height,t.append(n)}n.d(e,"app",function(){return g})}]);